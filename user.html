<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User - Generate Task</title>
<style>
body{font-family:Arial;background:url('min.jpg') no-repeat center center fixed;background-size:cover;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin:0;color:#fff;backdrop-filter:brightness(0.6);}
h1{margin-bottom:20px;text-shadow:1px 1px 2px #000;}
textarea{width:350px;height:250px;padding:10px;font-size:16px;border-radius:6px;border:none;outline:none;resize:none;}
.btn{padding:10px 20px;margin:10px;border:none;border-radius:5px;cursor:pointer;font-size:16px;}
.generate{background-color:#28a745;color:white;}
.copy{background-color:#007bff;color:white;}
#loginOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:flex;justify-content:center;align-items:center;z-index:9999;color:#fff;font-family:Arial;}
#loginOverlay div{background:#222;padding:30px;border-radius:8px;box-shadow:0 0 10px #000;text-align:center;}
#loginOverlay input{padding:8px;border-radius:4px;border:none;margin:10px;width:200px;}
#loginOverlay button{padding:8px 15px;border:none;border-radius:5px;background:#28a745;color:#fff;cursor:pointer;}
#loginError{color:red;display:none;margin-top:10px;}
</style>
</head>
<body>

<div id="loginOverlay">
  <div>
    <h2>User Login</h2>
    <input type="password" id="loginPass" placeholder="Enter password"><br>
    <button onclick="checkLogin()">Login</button>
    <p id="loginError">Wrong password</p>
  </div>
</div>

<div id="protectedContent" style="display:none;">
<h1>Hey Generate Your Task For Today</h1>
<button class="btn generate" onclick="generateTask()">Generate</button>
<textarea id="taskBox" placeholder="Your tasks will appear here..."></textarea><br>
<button class="btn copy" onclick="copyTask()">Copy to Clipboard</button>
</div>

<script>
const userPassword="User123"; // CHANGE THIS
function checkLogin(){
  const val=document.getElementById('loginPass').value;
  if(val===userPassword){
    sessionStorage.setItem('authOK_user','yes');
    document.getElementById('loginOverlay').style.display='none';
    document.getElementById('protectedContent').style.display='block';
  } else { document.getElementById('loginError').style.display='block'; }
}
window.onload=function(){
  if(sessionStorage.getItem('authOK_user')==='yes'){
    document.getElementById('loginOverlay').style.display='none';
    document.getElementById('protectedContent').style.display='block';
  }
};

/* Generate tasks from localStorage (same logic as before) */
function generateTask(){ 
  const today=new Date(),y=today.getFullYear(),m=String(today.getMonth()+1).padStart(2,'0'),d=String(today.getDate()).padStart(2,'0');
  const todayStr=`${y}-${m}-${d}`;
  let tasks=[];

  let timeTasks=JSON.parse(localStorage.getItem('timeTasks'))||[];
  timeTasks.forEach(t=>{if(t.date===todayStr) tasks.push(t.task+" (Due today)");});

  let repTasks=JSON.parse(localStorage.getItem('repTasks'))||[];
  repTasks.forEach(t=>{if(t.repDate && parseInt(t.repDate)===today.getDate()) tasks.push(t.task+" (Monthly)");});
  
  let bTasks=JSON.parse(localStorage.getItem('bdayTasks'))||[];
  bTasks.forEach(t=>{let e=new Date(t.date); if(e.getDate()===today.getDate() && e.getMonth()===today.getMonth()) tasks.push("ðŸŽ‰ "+t.name+" today!");});
  
  let eTasks=JSON.parse(localStorage.getItem('everydayTasks'))||[];
  eTasks.forEach(t=>tasks.push(t.task+" (Everyday)"));

  document.getElementById('taskBox').value = tasks.length?tasks.join("\n"):"No tasks for today!";
}

function copyTask(){ const t=document.getElementById('taskBox'); t.select(); t.setSelectionRange(0,99999); document.execCommand('copy'); alert('Tasks copied!'); }
</script>
</body>
</html>
